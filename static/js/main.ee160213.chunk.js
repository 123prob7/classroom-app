(this["webpackJsonpclassroom-app"]=this["webpackJsonpclassroom-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(27),r=n.n(s),c=n(14),o=n(13),i=n(225),u=n(227),l=n(231),j=n(230),d=n(171),b=n(229),x=n(2);function m(e){var t=e.className,n=e.section;return Object(x.jsx)(u.a,{sx:{height:"16rem",width:"20rem"},children:Object(x.jsxs)(b.a,{children:[Object(x.jsx)(j.a,{component:"img",sx:{height:"9rem"},image:"/static/images/jerry.jpg",alt:"class banner"}),Object(x.jsxs)(l.a,{children:[Object(x.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(x.jsx)(d.a,{variant:"body2",color:"text.secondary",children:n})]})]})})}function p(e){var t=e.classes;return Object(x.jsx)(i.a,{className:"flex flex-wrap",container:!0,spacing:2,sx:{width:"100%",mx:"auto",my:1},children:t&&t.map((function(e){return Object(x.jsx)(i.a,{item:!0,xs:3,sx:{my:1},children:Object(x.jsx)(m,{className:e.className,section:e.section})},e._id)}))})}var O=n(236),h=n(217),f=n(237),g=n(238),v=n(107),y=n.n(v),w=n(108),S=n.n(w),I=n(235),N=n(220),C=n(232),k=n(234),L=n(233),T=n(215),P=n(29),E=n.n(P),U=n(44),z=n(35),J=n.n(z),G=n(22);function R(){var e=JSON.parse(sessionStorage.getItem("user")),t=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken||t&&t.accessToken?e&&e.accessToken||t&&t.accessToken:null}var _="https://react-classroom-api.herokuapp.com/api/class/";function D(){return(D=Object(U.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.a.post(_,{token:R(),className:t,section:n}).then((function(e){return 200===e.data.status&&G.b.success(e.data.message),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.openForm,n=e.handleDialogClose,s=e.handlePost,r=a.useState(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=a.useState(""),j=Object(o.a)(l,2),d=j[0],b=j[1],m=function(){n(),u(""),b("")},p=function(e){e.preventDefault(),i&&(n(),function(e,t){return D.apply(this,arguments)}(i,d).then((function(e){s(e.data.newItem)})).catch(),u(""),b(""))},O=t;return Object(x.jsx)(C.a,{open:O,onClose:m,children:Object(x.jsxs)("form",{action:"/",method:"POST",onSubmit:p,children:[Object(x.jsx)(T.a,{children:"Create class"}),Object(x.jsxs)(L.a,{children:[Object(x.jsx)(N.a,{autoFocus:!0,margin:"dense",id:"className",label:"Class name (required)",type:"text",fullWidth:!0,variant:"standard",name:"className",value:i,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(N.a,{margin:"dense",id:"section",label:"Section",type:"text",fullWidth:!0,variant:"standard",name:"section",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(x.jsxs)(k.a,{children:[Object(x.jsx)(I.a,{onClick:m,children:"Cancel"}),i&&Object(x.jsx)(I.a,{type:"submit",onClick:p,children:"Create"}),!i&&Object(x.jsx)(I.a,{disabled:!0,onClick:p,children:"Create"})]})]})})}var B=n(218),A=n(113),W=n(223),M=n(28),q="https://react-classroom-api.herokuapp.com/api/auth/",H={login:function(){var e=Object(U.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.a.post(q+"login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(U.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.a.delete(q+"logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(U.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J.a.post(q+"signup",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSessionUser:function(){var e=Object(U.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("user"),e.abrupt("return",J.a.get(q,{token:R(),sessionUser:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},K=H,Q=n(114),V="REGISTER_SUCCESS",X="REGISTER_FAIL",Y="LOGIN_SUCCESS",Z="LOGIN_FAIL",$="LOGOUT",ee=new Q.a,te="myCat";var ne={login:function(e,t){return function(n){return K.login(e,t).then((function(e){e&&200===e.data.status&&(n({type:Y,payload:{user:e.data}}),G.b.success(e.data.message),localStorage.setItem("user",JSON.stringify(e.data)),sessionStorage.setItem("user",JSON.stringify(e.data)),ee.set(te,e.data.accessToken,{path:"/"})),e&&202===e.data.status&&(n({type:Z}),G.b.warn(e.data.message))})).catch((function(){n({type:Z}),G.b.error("Something went wrong..")}))}},logout:function(){return function(e){K.logout(),e({type:$}),localStorage.removeItem("user"),sessionStorage.removeItem("user"),ee.remove(te)}},signup:function(e,t){return function(n){return K.register(e,t).then((function(e){e&&200===e.data.status&&(n({type:V}),G.b.success(e.data.message)),e&&202===e.data.status&&(n({type:X}),G.b.warn(e.data.message))})).catch((function(e){n({type:X}),G.b.error("Something went wrong..")}))}},checkIfLoggedIn:function(){return function(e){var t=JSON.parse(sessionStorage.getItem("user"));t&&K.getSessionUser().then((function(n){n.data&&n.data.user?n.data.user.userId===t.user.userId&&e({type:Y,payload:n.data}):(e({type:Z}),localStorage.removeItem("user"),ee.remove(te))}))}}};function ae(e){var t=e.handlePost,n=a.useState(!1),s=Object(o.a)(n,2),r=s[0],c=s[1],i=a.useState(null),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(M.c)((function(e){return e.session.user})),m=Object(M.b)(),p=function(){j(null)};return Object(x.jsx)(h.a,{sx:{flexGrow:1},children:Object(x.jsx)(O.a,{position:"static",children:Object(x.jsxs)(f.a,{children:[Object(x.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(y.a,{})}),Object(x.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Classroom"}),b&&Object(x.jsxs)(h.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(x.jsx)(g.a,{onClick:function(){return c(!r)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(S.a,{})}),Object(x.jsx)(g.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(x.jsx)(B.a,{})}),Object(x.jsx)(A.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(l),onClose:p,children:Object(x.jsx)(W.a,{onClick:function(){p(),m(ne.logout())},children:"Log out"})})]}),Object(x.jsx)(F,{openForm:r,handleDialogClose:function(){return c(!r)},handlePost:t})]})})})}function se(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){function e(e){s(e)}var t;return t=e,J.a.get(_,{token:R()}).then((function(e){t(e.data.data)})),function(){return function(e){e(void 0)}(e)}}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)(ae,{handlePost:function(e){var t=e._id,a=e.className,r=e.section;return s([].concat(Object(c.a)(n),[{_id:t,className:a,section:r}]))}}),Object(x.jsx)(p,{classes:n})]})}var re=n(219),ce=n(31);function oe(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(M.b)();return Object(x.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&l(ne.login(n,i))},children:Object(x.jsxs)(re.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(x.jsx)(B.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(x.jsx)(d.a,{sx:{my:2},children:"Sign in"}),Object(x.jsx)(N.a,{className:"w-4/5",label:"Username",type:"text",value:n,onChange:function(e){return s(e.target.value)},sx:{my:2}}),Object(x.jsx)(N.a,{className:"w-4/5",label:"Password",type:"password",value:i,onChange:function(e){return u(e.target.value)},sx:{my:2}}),Object(x.jsxs)(re.a,{className:"flex justify-evenly w-4/5",sx:{my:2},children:[n&&i&&Object(x.jsx)(I.a,{variant:"contained",type:"submit",children:"Log In"}),(!n||!i)&&Object(x.jsx)(I.a,{disabled:!0,variant:"contained",type:"submit",children:"Log In"}),Object(x.jsx)(ce.b,{to:"/signup",sx:{"text-decoration":"none"},children:Object(x.jsx)(I.a,{variant:"outlined",children:"Sign up"})})]})]})})}function ie(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(a.useState)(""),j=Object(o.a)(l,2),b=j[0],m=j[1],p=Object(M.b)();return Object(x.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&b?i===b?p(ne.signup(n,i)):G.b.warn("Passwords don't match!"):G.b.warn("One field is missed!")},children:Object(x.jsxs)(re.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(x.jsx)(B.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(x.jsx)(d.a,{sx:{my:2},children:"Sign up"}),Object(x.jsx)(N.a,{className:"w-4/5",label:"Username",type:"text",sx:{my:2},value:n,onChange:function(e){return s(e.target.value)}}),Object(x.jsx)(N.a,{className:"w-4/5",label:"Password",type:"password",sx:{my:2},value:i,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(N.a,{className:"w-4/5",label:"Re-type Password",type:"password",sx:{my:2},value:b,onChange:function(e){return m(e.target.value)}}),Object(x.jsxs)(re.a,{sx:{my:2,display:"flex",justifyContent:"space-evenly",width:"80%"},children:[n&&i&&Object(x.jsx)(I.a,{variant:"contained",type:"submit",children:"Create account"}),(!n||!i)&&Object(x.jsx)(I.a,{disabled:!0,variant:"contained",type:"submit",children:"Create account"})]}),Object(x.jsx)(ce.b,{className:"pb-4 text-blue-500",to:"/login",sx:{"text-decoration":"none"},children:"Already has an account?"})]})})}var ue=n(16),le=n(23);function je(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(x.jsx)(ue.b,{path:n,render:function(e){return t?Object(x.jsx)(ue.a,{to:"/class"}):Object(x.jsx)(a,Object(le.a)({},e))}})}function de(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(x.jsx)(ue.b,{path:n,render:function(e){return t?Object(x.jsx)(a,Object(le.a)({},e)):Object(x.jsx)(ue.a,{to:"/login"})}})}var be=n(110),xe=n.n(be);function me(){return Object(x.jsx)("div",{className:"max-w-1/4 h-screen mx-auto flex flex-col justify-center",children:Object(x.jsxs)("div",{className:"my-auto flex flex-col justify-center p-8 border border-solid border-gray-300 rounded",children:[Object(x.jsx)("p",{className:"my-4 text-3xl font-bold",children:"Page not found"}),Object(x.jsx)("p",{className:"my-4",children:"Looks like you've followed a broken link or entered a URL that doesn't exist on this site."}),Object(x.jsxs)(ce.b,{to:"/class",className:"my-4 flex text-blue-500",children:[Object(x.jsx)(xe.a,{sx:{fontSize:"1rem",margin:"auto 0"}}),Object(x.jsx)("p",{className:"text-base text-blue-500",children:"Back to our site"})]}),Object(x.jsx)("div",{className:"my-4 w-full border border-solid border-gray-300"})]})})}n(159);function pe(){var e=Object(M.c)((function(e){return e.session.isLoggedIn}));return Object(M.b)()(ne.checkIfLoggedIn()),Object(x.jsxs)("div",{children:[Object(x.jsxs)(ue.d,{children:[Object(x.jsx)(de,{isLoggedIn:e,path:"/class",component:function(){return Object(x.jsx)(se,{})}}),Object(x.jsx)(je,{isLoggedIn:e,path:"/signup",component:ie}),Object(x.jsx)(je,{isLoggedIn:e,path:"/login",component:oe}),Object(x.jsx)(ue.b,{path:"/404",component:me}),Object(x.jsx)(ue.a,{exact:!0,path:"/",to:"/login"}),Object(x.jsx)(ue.a,{from:"/*",to:"/404"})]}),Object(x.jsx)(G.a,{position:"top-center",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function Oe(){return Object(x.jsx)(ce.a,{basename:"/classroom-app",children:Object(x.jsx)(pe,{})})}n(160);var he=n(45),fe=JSON.parse(localStorage.getItem("user")),ge=fe?{isLoggedIn:!0,user:fe}:{isLoggedIn:!1,user:null};var ve=Object(he.combineReducers)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case V:case X:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1});case Y:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!0,user:a.user});case Z:case $:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}}}),ye=n(112),we=n(111),Se=Object(we.composeWithDevTools)(Object(he.applyMiddleware)(ye.a)),Ie=Object(he.createStore)(ve,Se);r.a.render(Object(x.jsx)(M.a,{store:Ie,children:Object(x.jsx)(Oe,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.ee160213.chunk.js.map