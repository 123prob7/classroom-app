(this["webpackJsonpclassroom-app"]=this["webpackJsonpclassroom-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(28),s=n.n(r),c=n(14),o=n(13),i=n(225),u=n(227),l=n(231),j=n(230),d=n(171),b=n(229),p=n(2);function x(e){var t=e.className,n=e.section;return Object(p.jsx)(u.a,{sx:{height:"16rem",width:"20rem"},children:Object(p.jsxs)(b.a,{children:[Object(p.jsx)(j.a,{component:"img",height:"9rem",image:"/classroom-app/static/images/jerry.jpg",alt:"class banner"}),Object(p.jsxs)(l.a,{children:[Object(p.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(p.jsx)(d.a,{variant:"body2",color:"text.secondary",children:n})]})]})})}function m(e){var t=e.classes;return Object(p.jsx)(i.a,{className:"flex flex-wrap",container:!0,spacing:2,sx:{width:"100%",mx:"auto",my:1},children:t&&t.map((function(e){return Object(p.jsx)(i.a,{item:!0,xs:3,sx:{my:1},children:Object(p.jsx)(x,{className:e.className,section:e.section})},e._id)}))})}var O=n(236),h=n(217),f=n(237),g=n(238),v=n(107),y=n.n(v),w=n(108),S=n.n(w),I=n(235),N=n(220),C=n(232),k=n(234),L=n(233),T=n(215),P=n(29),U=n.n(P),R=n(44),_=n(35),E=n.n(_),z=n(24);function J(){var e=JSON.parse(sessionStorage.getItem("user")),t=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken||t&&t.accessToken?e&&e.accessToken||t&&t.accessToken:null}var G="https://react-classroom-api.herokuapp.com/api/class/";function D(){return(D=Object(R.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(G,{token:J(),className:t,section:n}).then((function(e){return 200===e.data.status&&z.b.success(e.data.message),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.openForm,n=e.handleDialogClose,r=e.handlePost,s=a.useState(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=a.useState(""),j=Object(o.a)(l,2),d=j[0],b=j[1],x=function(){n(),u(""),b("")},m=function(e){e.preventDefault(),i&&(n(),function(e,t){return D.apply(this,arguments)}(i,d).then((function(e){r(e.data.newItem)})).catch(),u(""),b(""))},O=t;return Object(p.jsx)(C.a,{open:O,onClose:x,children:Object(p.jsxs)("form",{action:"/",method:"POST",onSubmit:m,children:[Object(p.jsx)(T.a,{children:"Create class"}),Object(p.jsxs)(L.a,{children:[Object(p.jsx)(N.a,{autoFocus:!0,margin:"dense",id:"className",label:"Class name (required)",type:"text",fullWidth:!0,variant:"standard",name:"className",value:i,onChange:function(e){return u(e.target.value)}}),Object(p.jsx)(N.a,{margin:"dense",id:"section",label:"Section",type:"text",fullWidth:!0,variant:"standard",name:"section",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(I.a,{onClick:x,children:"Cancel"}),i&&Object(p.jsx)(I.a,{type:"submit",onClick:m,children:"Create"}),!i&&Object(p.jsx)(I.a,{disabled:!0,onClick:m,children:"Create"})]})]})})}var B=n(218),A=n(113),W=n(223),M=n(21),q="https://react-classroom-api.herokuapp.com/api/auth/",H={login:function(){var e=Object(R.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(q+"login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(R.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.delete(q+"logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(R.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(q+"signup",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSessionUser:function(){var e=Object(R.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("user"),e.abrupt("return",E.a.get(q,{token:J(),sessionUser:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},K=H,Q=n(114),V="REGISTER_SUCCESS",X="REGISTER_FAIL",Y="LOGIN_SUCCESS",Z="LOGIN_FAIL",$="LOGOUT",ee=new Q.a,te="myCat";var ne={login:function(e,t){return function(n){return K.login(e,t).then((function(e){e&&200===e.data.status&&(n({type:Y,payload:{user:e.data}}),z.b.success(e.data.message),localStorage.setItem("user",JSON.stringify(e.data)),sessionStorage.setItem("user",JSON.stringify(e.data)),ee.set(te,e.data.accessToken,{path:"/"})),e&&202===e.data.status&&(n({type:Z}),z.b.warn(e.data.message))})).catch((function(){n({type:Z}),z.b.error("Something went wrong..")}))}},logout:function(){return function(e){K.logout(),e({type:$}),localStorage.removeItem("user"),sessionStorage.removeItem("user"),ee.remove(te)}},signup:function(e,t){return function(n){return K.register(e,t).then((function(e){e&&200===e.data.status&&(n({type:V}),z.b.success(e.data.message)),e&&202===e.data.status&&(n({type:X}),z.b.warn(e.data.message))})).catch((function(e){n({type:X}),z.b.error("Something went wrong..")}))}},checkIfLoggedIn:function(){return function(e){var t=JSON.parse(sessionStorage.getItem("user"));t&&K.getSessionUser().then((function(n){n.data&&n.data.user?n.data.user.userId===t.user.userId&&e({type:Y,payload:n.data}):(e({type:Z}),localStorage.removeItem("user"),ee.remove(te))}))}}};function ae(e){var t=e.handlePost,n=a.useState(!1),r=Object(o.a)(n,2),s=r[0],c=r[1],i=a.useState(null),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(M.c)((function(e){return e.session.user})),x=Object(M.b)(),m=function(){j(null)};return Object(p.jsx)(h.a,{sx:{flexGrow:1},children:Object(p.jsx)(O.a,{position:"static",children:Object(p.jsxs)(f.a,{children:[Object(p.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(p.jsx)(y.a,{})}),Object(p.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Classroom"}),b&&Object(p.jsxs)(h.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(p.jsx)(g.a,{onClick:function(){return c(!s)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(p.jsx)(S.a,{})}),Object(p.jsx)(g.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(p.jsx)(B.a,{})}),Object(p.jsx)(A.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(l),onClose:m,children:Object(p.jsx)(W.a,{onClick:function(){m(),x(ne.logout())},children:"Log out"})})]}),Object(p.jsx)(F,{openForm:s,handleDialogClose:function(){return c(!s)},handlePost:t})]})})})}function re(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(e){r(e)}var t;return t=e,E.a.get(G,{token:J()}).then((function(e){t(e.data.data)})),function(){return function(e){e(void 0)}(e)}}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)(ae,{handlePost:function(e){var t=e._id,a=e.className,s=e.section;return r([].concat(Object(c.a)(n),[{_id:t,className:a,section:s}]))}}),Object(p.jsx)(m,{classes:n})]})}var se=n(219),ce=n(31);function oe(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(M.b)(),j=Object(M.c)((function(e){return e.rootURL})).url;return Object(p.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&l(ne.login(n,i))},children:Object(p.jsxs)(se.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(p.jsx)(B.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(p.jsx)(d.a,{sx:{my:2},children:"Sign in"}),Object(p.jsx)(N.a,{className:"w-4/5",label:"Username",type:"text",value:n,onChange:function(e){return r(e.target.value)},sx:{my:2}}),Object(p.jsx)(N.a,{className:"w-4/5",label:"Password",type:"password",value:i,onChange:function(e){return u(e.target.value)},sx:{my:2}}),Object(p.jsxs)(se.a,{className:"flex justify-evenly w-4/5",sx:{my:2},children:[n&&i&&Object(p.jsx)(I.a,{variant:"contained",type:"submit",children:"Log In"}),(!n||!i)&&Object(p.jsx)(I.a,{disabled:!0,variant:"contained",type:"submit",children:"Log In"}),Object(p.jsx)(ce.b,{to:"".concat(j,"/signup"),sx:{"text-decoration":"none"},children:Object(p.jsx)(I.a,{variant:"outlined",children:"Sign up"})})]})]})})}function ie(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(a.useState)(""),j=Object(o.a)(l,2),b=j[0],x=j[1],m=Object(M.c)((function(e){return e.rootURL})).url,O=Object(M.b)();return Object(p.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&b?i===b?O(ne.signup(n,i)):z.b.warn("Passwords don't match!"):z.b.warn("One field is missed!")},children:Object(p.jsxs)(se.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(p.jsx)(B.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(p.jsx)(d.a,{sx:{my:2},children:"Sign up"}),Object(p.jsx)(N.a,{className:"w-4/5",label:"Username",type:"text",sx:{my:2},value:n,onChange:function(e){return r(e.target.value)}}),Object(p.jsx)(N.a,{className:"w-4/5",label:"Password",type:"password",sx:{my:2},value:i,onChange:function(e){return u(e.target.value)}}),Object(p.jsx)(N.a,{className:"w-4/5",label:"Re-type Password",type:"password",sx:{my:2},value:b,onChange:function(e){return x(e.target.value)}}),Object(p.jsxs)(se.a,{sx:{my:2,display:"flex",justifyContent:"space-evenly",width:"80%"},children:[n&&i&&Object(p.jsx)(I.a,{variant:"contained",type:"submit",children:"Create account"}),(!n||!i)&&Object(p.jsx)(I.a,{disabled:!0,variant:"contained",type:"submit",children:"Create account"})]}),Object(p.jsx)(ce.b,{className:"pb-4 text-blue-500",to:"".concat(m,"/login"),sx:{"text-decoration":"none"},children:"Already has an account?"})]})})}var ue=n(16),le=n(19);function je(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(p.jsx)(ue.b,{path:n,render:function(e){return t?Object(p.jsx)(ue.a,{to:"/class"}):Object(p.jsx)(a,Object(le.a)({},e))}})}function de(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(p.jsx)(ue.b,{path:n,render:function(e){return t?Object(p.jsx)(a,Object(le.a)({},e)):Object(p.jsx)(ue.a,{to:"/login"})}})}var be=n(110),pe=n.n(be);function xe(){var e=Object(M.c)((function(e){return e.rootURL})).url;return Object(p.jsx)("div",{className:"max-w-1/4 h-screen mx-auto flex flex-col justify-center",children:Object(p.jsxs)("div",{className:"my-auto flex flex-col justify-center p-8 border border-solid border-gray-300 rounded",children:[Object(p.jsx)("p",{className:"my-4 text-3xl font-bold",children:"Page not found"}),Object(p.jsx)("p",{className:"my-4",children:"Looks like you've followed a broken link or entered a URL that doesn't exist on this site."}),Object(p.jsxs)(ce.b,{to:"".concat(e,"/class"),className:"my-4 flex text-blue-500",children:[Object(p.jsx)(pe.a,{sx:{fontSize:"1rem",margin:"auto 0"}}),Object(p.jsx)("p",{className:"text-base text-blue-500",children:"Back to our site"})]}),Object(p.jsx)("div",{className:"my-4 w-full border border-solid border-gray-300"})]})})}n(159);function me(){var e=Object(M.c)((function(e){return e.session.isLoggedIn})),t=Object(ue.g)().url,n=Object(M.b)();return n(ne.checkIfLoggedIn()),Object(a.useEffect)((function(){n({type:"create_root_url",payload:t})}),[]),Object(p.jsxs)("div",{children:[Object(p.jsxs)(ue.d,{children:[Object(p.jsx)(de,{isLoggedIn:e,path:"".concat(t,"/class"),component:function(){return Object(p.jsx)(re,{})}}),Object(p.jsx)(je,{isLoggedIn:e,path:"".concat(t,"/signup"),component:ie}),Object(p.jsx)(je,{isLoggedIn:e,path:"".concat(t,"/login"),component:oe}),Object(p.jsx)(ue.b,{path:"".concat(t,"/404"),component:xe}),Object(p.jsx)(ue.a,{from:"".concat(t,"/*"),to:"".concat(t,"/404")})]}),Object(p.jsx)(z.a,{position:"top-center",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function Oe(){return Object(p.jsx)(ce.a,{children:Object(p.jsx)(me,{})})}n(160);var he=n(45),fe={url:null};var ge=JSON.parse(localStorage.getItem("user")),ve=ge?{isLoggedIn:!0,user:ge}:{isLoggedIn:!1,user:null};var ye=Object(he.combineReducers)({rootURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return"create_root_url"===n?Object(le.a)(Object(le.a)({},e),{},{url:a}):e},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case V:case X:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1});case Y:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!0,user:a.user});case Z:case $:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}}}),we=n(112),Se=n(111),Ie=Object(Se.composeWithDevTools)(Object(he.applyMiddleware)(we.a)),Ne=Object(he.createStore)(ye,Ie);s.a.render(Object(p.jsx)(M.a,{store:Ne,children:Object(p.jsx)(Oe,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.56b193f1.chunk.js.map