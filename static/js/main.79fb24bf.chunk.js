(this["webpackJsonpclassroom-app"]=this["webpackJsonpclassroom-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(27),c=n.n(s),o=n(14),i=n(13),u=n(225),l=n(227),j=n(231),d=n(230),b=n(171),x=n(229),m=n(2);function p(e){var t=e.className,n=e.section;return Object(m.jsx)(l.a,{sx:{height:"16rem",width:"20rem"},children:Object(m.jsxs)(x.a,{children:[Object(m.jsx)(d.a,{component:"img",height:"9rem",image:"/static/images/jerry.jpg",alt:"class banner"}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(m.jsx)(b.a,{variant:"body2",color:"text.secondary",children:n})]})]})})}function O(e){var t=e.classes;return Object(m.jsx)(u.a,{className:"flex flex-wrap",container:!0,spacing:2,sx:{width:"100%",mx:"auto",my:1},children:t&&t.map((function(e){return Object(m.jsx)(u.a,{item:!0,xs:3,sx:{my:1},children:Object(m.jsx)(p,{className:e.className,section:e.section})},e._id)}))})}var h=n(236),f=n(217),g=n(237),v=n(238),y=n(107),w=n.n(y),S=n(108),I=n.n(S),N=n(235),C=n(220),k=n(232),L=n(234),T=n(233),P=n(215),E=n(29),U=n.n(E),z=n(44),J=n(35),G=n.n(J),_=n(22);function D(){var e=JSON.parse(sessionStorage.getItem("user")),t=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken||t&&t.accessToken?e&&e.accessToken||t&&t.accessToken:null}var F="https://react-classroom-api.herokuapp.com/api/class/";function R(){return(R=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(F,{token:D(),className:t,section:n}).then((function(e){return 200===e.data.status&&_.b.success(e.data.message),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.openForm,n=e.handleDialogClose,r=e.handlePost,s=a.useState(""),c=Object(i.a)(s,2),o=c[0],u=c[1],l=a.useState(""),j=Object(i.a)(l,2),d=j[0],b=j[1],x=function(){n(),u(""),b("")},p=function(e){e.preventDefault(),o&&(n(),function(e,t){return R.apply(this,arguments)}(o,d).then((function(e){r(e.data.newItem)})).catch(),u(""),b(""))},O=t;return Object(m.jsx)(k.a,{open:O,onClose:x,children:Object(m.jsxs)("form",{action:"/",method:"POST",onSubmit:p,children:[Object(m.jsx)(P.a,{children:"Create class"}),Object(m.jsxs)(T.a,{children:[Object(m.jsx)(C.a,{autoFocus:!0,margin:"dense",id:"className",label:"Class name (required)",type:"text",fullWidth:!0,variant:"standard",name:"className",value:o,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(C.a,{margin:"dense",id:"section",label:"Section",type:"text",fullWidth:!0,variant:"standard",name:"section",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(m.jsxs)(L.a,{children:[Object(m.jsx)(N.a,{onClick:x,children:"Cancel"}),o&&Object(m.jsx)(N.a,{type:"submit",onClick:p,children:"Create"}),!o&&Object(m.jsx)(N.a,{disabled:!0,onClick:p,children:"Create"})]})]})})}var A=n(218),M=n(113),W=n(223),q=n(28),H="https://react-classroom-api.herokuapp.com/api/auth/",K={login:function(){var e=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(H+"login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.delete(H+"logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(H+"signup",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSessionUser:function(){var e=Object(z.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("user"),e.abrupt("return",G.a.get(H,{token:D(),sessionUser:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q=K,V=n(114),X="REGISTER_SUCCESS",Y="REGISTER_FAIL",Z="LOGIN_SUCCESS",$="LOGIN_FAIL",ee="LOGOUT",te=new V.a,ne="myCat";var ae={login:function(e,t){return function(n){return Q.login(e,t).then((function(e){e&&200===e.data.status&&(n({type:Z,payload:{user:e.data}}),_.b.success(e.data.message),localStorage.setItem("user",JSON.stringify(e.data)),sessionStorage.setItem("user",JSON.stringify(e.data)),te.set(ne,e.data.accessToken,{path:"/"})),e&&202===e.data.status&&(n({type:$}),_.b.warn(e.data.message))})).catch((function(){n({type:$}),_.b.error("Something went wrong..")}))}},logout:function(){return function(e){Q.logout(),e({type:ee}),localStorage.removeItem("user"),sessionStorage.removeItem("user"),te.remove(ne)}},signup:function(e,t){return function(n){return Q.register(e,t).then((function(e){e&&200===e.data.status&&(n({type:X}),_.b.success(e.data.message)),e&&202===e.data.status&&(n({type:Y}),_.b.warn(e.data.message))})).catch((function(e){n({type:Y}),_.b.error("Something went wrong..")}))}},checkIfLoggedIn:function(){return function(e){var t=JSON.parse(sessionStorage.getItem("user"));t&&Q.getSessionUser().then((function(n){n.data&&n.data.user?n.data.user.userId===t.user.userId&&e({type:Z,payload:n.data}):(e({type:$}),localStorage.removeItem("user"),te.remove(ne))}))}}};function re(e){var t=e.handlePost,n=a.useState(!1),r=Object(i.a)(n,2),s=r[0],c=r[1],o=a.useState(null),u=Object(i.a)(o,2),l=u[0],j=u[1],d=Object(q.c)((function(e){return e.user})),x=Object(q.b)(),p=function(){j(null)};return Object(m.jsx)(f.a,{sx:{flexGrow:1},children:Object(m.jsx)(h.a,{position:"static",children:Object(m.jsxs)(g.a,{children:[Object(m.jsx)(v.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(w.a,{})}),Object(m.jsx)(b.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Classroom"}),d&&Object(m.jsxs)(f.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(m.jsx)(v.a,{onClick:function(){return c(!s)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(I.a,{})}),Object(m.jsx)(v.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(m.jsx)(A.a,{})}),Object(m.jsx)(M.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(l),onClose:p,children:Object(m.jsx)(W.a,{onClick:function(){p(),x(ae.logout())},children:"Log out"})})]}),Object(m.jsx)(B,{openForm:s,handleDialogClose:function(){return c(!s)},handlePost:t})]})})})}function se(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(e){r(e)}var t;return t=e,G.a.get(F,{token:D()}).then((function(e){t(e.data.data)})),function(){return function(e){e(void 0)}(e)}}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(re,{handlePost:function(e){var t=e._id,a=e.className,s=e.section;return r([].concat(Object(o.a)(n),[{_id:t,className:a,section:s}]))}}),Object(m.jsx)(O,{classes:n})]})}var ce=n(219),oe=n(33);function ie(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(q.b)();return Object(m.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&o&&l(ae.login(n,o))},children:Object(m.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(m.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(m.jsx)(b.a,{sx:{my:2},children:"Sign in"}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",value:n,onChange:function(e){return r(e.target.value)},sx:{my:2}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",value:o,onChange:function(e){return u(e.target.value)},sx:{my:2}}),Object(m.jsxs)(ce.a,{className:"flex justify-evenly w-4/5",sx:{my:2},children:[n&&o&&Object(m.jsx)(N.a,{variant:"contained",type:"submit",children:"Log In"}),(!n||!o)&&Object(m.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Log In"}),Object(m.jsx)(oe.b,{to:"/signup",sx:{"text-decoration":"none"},children:Object(m.jsx)(N.a,{variant:"outlined",children:"Sign up"})})]})]})})}function ue(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],x=j[1],p=Object(q.b)();return Object(m.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&o&&d?o===d?p(ae.signup(n,o)):_.b.warn("Passwords don't match!"):_.b.warn("One field is missed!")},children:Object(m.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(m.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(m.jsx)(b.a,{sx:{my:2},children:"Sign up"}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",sx:{my:2},value:n,onChange:function(e){return r(e.target.value)}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",sx:{my:2},value:o,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Re-type Password",type:"password",sx:{my:2},value:d,onChange:function(e){return x(e.target.value)}}),Object(m.jsxs)(ce.a,{sx:{my:2,display:"flex",justifyContent:"space-evenly",width:"80%"},children:[n&&o&&Object(m.jsx)(N.a,{variant:"contained",type:"submit",children:"Create account"}),(!n||!o)&&Object(m.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Create account"})]}),Object(m.jsx)(oe.b,{className:"pb-4 text-blue-500",to:"/login",sx:{"text-decoration":"none"},children:"Already has an account?"})]})})}var le=n(16),je=n(23);function de(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(m.jsx)(le.b,{path:n,render:function(e){return t?Object(m.jsx)(le.a,{to:"/class"}):Object(m.jsx)(a,Object(je.a)({},e))}})}function be(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(m.jsx)(le.b,{path:n,render:function(e){return t?Object(m.jsx)(a,Object(je.a)({},e)):Object(m.jsx)(le.a,{to:"/login"})}})}var xe=n(110),me=n.n(xe);function pe(){return Object(m.jsx)("div",{className:"max-w-1/4 h-screen mx-auto flex flex-col justify-center",children:Object(m.jsxs)("div",{className:"my-auto flex flex-col justify-center p-8 border border-solid border-gray-300 rounded",children:[Object(m.jsx)("p",{className:"my-4 text-3xl font-bold",children:"Page not found"}),Object(m.jsx)("p",{className:"my-4",children:"Looks like you've followed a broken link or entered a URL that doesn't exist on this site."}),Object(m.jsxs)(oe.b,{to:"/class",className:"my-4 flex text-blue-500",children:[Object(m.jsx)(me.a,{sx:{fontSize:"1rem",margin:"auto 0"}}),Object(m.jsx)("p",{className:"text-base text-blue-500",children:"Back to our site"})]}),Object(m.jsx)("div",{className:"my-4 w-full border border-solid border-gray-300"})]})})}n(159);function Oe(){var e=Object(q.c)((function(e){return e.isLoggedIn}));return Object(q.b)()(ae.checkIfLoggedIn()),Object(m.jsxs)(oe.a,{children:[Object(m.jsxs)(le.d,{children:[Object(m.jsx)(be,{isLoggedIn:e,path:["/class"],component:function(){return Object(m.jsx)(se,{})}}),Object(m.jsx)(de,{isLoggedIn:e,path:"/signup",component:ue}),Object(m.jsx)(de,{isLoggedIn:e,path:["/login"],component:ie}),Object(m.jsx)(le.b,{path:"/404",component:pe}),Object(m.jsx)(le.a,{from:"*",to:"/404"})]}),Object(m.jsx)(_.a,{position:"top-center",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function he(){return Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Oe,{})})}n(160);var fe=n(69),ge=JSON.parse(localStorage.getItem("user")),ve=ge?{isLoggedIn:!0,user:ge}:{isLoggedIn:!1,user:null};var ye=n(112),we=n(111),Se=Object(we.composeWithDevTools)(Object(fe.applyMiddleware)(ye.a)),Ie=Object(fe.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case X:case Y:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!1});case Z:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!0,user:a.user});case $:case ee:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}}),Se),Ne=Ie;c.a.render(Object(m.jsx)(q.a,{store:Ne,children:Object(m.jsx)(he,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.79fb24bf.chunk.js.map