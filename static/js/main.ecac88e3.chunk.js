(this["webpackJsonpclassroom-app"]=this["webpackJsonpclassroom-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(28),s=n.n(r),c=n(14),o=n(13),i=n(225),u=n(227),l=n(231),j=n(230),d=n(171),b=n(229),p="/classroom-app",x=n(2);function m(e){var t=e.className,n=e.section;return Object(x.jsx)(u.a,{sx:{height:"16rem",width:"20rem"},children:Object(x.jsxs)(b.a,{children:[Object(x.jsx)(j.a,{component:"img",height:"9rem",image:"/classroom-app/static/images/jerry.jpg",alt:"class banner"}),Object(x.jsxs)(l.a,{children:[Object(x.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(x.jsx)(d.a,{variant:"body2",color:"text.secondary",children:n})]})]})})}function O(e){var t=e.classes;return Object(x.jsx)(i.a,{className:"flex flex-wrap",container:!0,spacing:2,sx:{width:"100%",mx:"auto",my:1},children:t&&t.map((function(e){return Object(x.jsx)(i.a,{item:!0,xs:3,sx:{my:1},children:Object(x.jsx)(m,{className:e.className,section:e.section})},e._id)}))})}var h=n(236),f=n(217),g=n(237),v=n(238),y=n(107),w=n.n(y),S=n(108),I=n.n(S),N=n(235),C=n(220),k=n(232),L=n(234),T=n(233),P=n(215),U=n(29),R=n.n(U),_=n(44),E=n(35),z=n.n(E),J=n(24);function G(){var e=JSON.parse(sessionStorage.getItem("user")),t=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken||t&&t.accessToken?e&&e.accessToken||t&&t.accessToken:null}var D="https://react-classroom-api.herokuapp.com/api/class/";function F(){return(F=Object(_.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.a.post(D,{token:G(),className:t,section:n}).then((function(e){return 200===e.data.status&&J.b.success(e.data.message),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.openForm,n=e.handleDialogClose,r=e.handlePost,s=a.useState(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=a.useState(""),j=Object(o.a)(l,2),d=j[0],b=j[1],p=function(){n(),u(""),b("")},m=function(e){e.preventDefault(),i&&(n(),function(e,t){return F.apply(this,arguments)}(i,d).then((function(e){r(e.data.newItem)})).catch(),u(""),b(""))},O=t;return Object(x.jsx)(k.a,{open:O,onClose:p,children:Object(x.jsxs)("form",{action:"/",method:"POST",onSubmit:m,children:[Object(x.jsx)(P.a,{children:"Create class"}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(C.a,{autoFocus:!0,margin:"dense",id:"className",label:"Class name (required)",type:"text",fullWidth:!0,variant:"standard",name:"className",value:i,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(C.a,{margin:"dense",id:"section",label:"Section",type:"text",fullWidth:!0,variant:"standard",name:"section",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(x.jsxs)(L.a,{children:[Object(x.jsx)(N.a,{onClick:p,children:"Cancel"}),i&&Object(x.jsx)(N.a,{type:"submit",onClick:m,children:"Create"}),!i&&Object(x.jsx)(N.a,{disabled:!0,onClick:m,children:"Create"})]})]})})}var A=n(218),W=n(113),M=n(223),q=n(21),H="https://react-classroom-api.herokuapp.com/api/auth/",K={login:function(){var e=Object(_.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.a.post(H+"login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(_.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.a.delete(H+"logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(_.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.a.post(H+"signup",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSessionUser:function(){var e=Object(_.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("user"),e.abrupt("return",z.a.get(H,{token:G(),sessionUser:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q=K,V=n(114),X="REGISTER_SUCCESS",Y="REGISTER_FAIL",Z="LOGIN_SUCCESS",$="LOGIN_FAIL",ee="LOGOUT",te=new V.a,ne="myCat";var ae={login:function(e,t){return function(n){return Q.login(e,t).then((function(e){e&&200===e.data.status&&(n({type:Z,payload:{user:e.data}}),J.b.success(e.data.message),localStorage.setItem("user",JSON.stringify(e.data)),sessionStorage.setItem("user",JSON.stringify(e.data)),te.set(ne,e.data.accessToken,{path:"/"})),e&&202===e.data.status&&(n({type:$}),J.b.warn(e.data.message))})).catch((function(){n({type:$}),J.b.error("Something went wrong..")}))}},logout:function(){return function(e){Q.logout(),e({type:ee}),localStorage.removeItem("user"),sessionStorage.removeItem("user"),te.remove(ne)}},signup:function(e,t){return function(n){return Q.register(e,t).then((function(e){e&&200===e.data.status&&(n({type:X}),J.b.success(e.data.message)),e&&202===e.data.status&&(n({type:Y}),J.b.warn(e.data.message))})).catch((function(e){n({type:Y}),J.b.error("Something went wrong..")}))}},checkIfLoggedIn:function(){return function(e){var t=JSON.parse(sessionStorage.getItem("user"));t&&Q.getSessionUser().then((function(n){n.data&&n.data.user?n.data.user.userId===t.user.userId&&e({type:Z,payload:n.data}):(e({type:$}),localStorage.removeItem("user"),te.remove(ne))}))}}};function re(e){var t=e.handlePost,n=a.useState(!1),r=Object(o.a)(n,2),s=r[0],c=r[1],i=a.useState(null),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(q.c)((function(e){return e.session.user})),p=Object(q.b)(),m=function(){j(null)};return Object(x.jsx)(f.a,{sx:{flexGrow:1},children:Object(x.jsx)(h.a,{position:"static",children:Object(x.jsxs)(g.a,{children:[Object(x.jsx)(v.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(w.a,{})}),Object(x.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Classroom"}),b&&Object(x.jsxs)(f.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(x.jsx)(v.a,{onClick:function(){return c(!s)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(x.jsx)(I.a,{})}),Object(x.jsx)(v.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(x.jsx)(A.a,{})}),Object(x.jsx)(W.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(l),onClose:m,children:Object(x.jsx)(M.a,{onClick:function(){m(),p(ae.logout())},children:"Log out"})})]}),Object(x.jsx)(B,{openForm:s,handleDialogClose:function(){return c(!s)},handlePost:t})]})})})}function se(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(e){r(e)}var t;return t=e,z.a.get(D,{token:G()}).then((function(e){t(e.data.data)})),function(){return function(e){e(void 0)}(e)}}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)(re,{handlePost:function(e){var t=e._id,a=e.className,s=e.section;return r([].concat(Object(c.a)(n),[{_id:t,className:a,section:s}]))}}),Object(x.jsx)(O,{classes:n})]})}var ce=n(219),oe=n(31);function ie(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(q.b)(),j=Object(q.c)((function(e){return e.rootURL})).url;return Object(x.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&l(ae.login(n,i))},children:Object(x.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(x.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(x.jsx)(d.a,{sx:{my:2},children:"Sign in"}),Object(x.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",value:n,onChange:function(e){return r(e.target.value)},sx:{my:2}}),Object(x.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",value:i,onChange:function(e){return u(e.target.value)},sx:{my:2}}),Object(x.jsxs)(ce.a,{className:"flex justify-evenly w-4/5",sx:{my:2},children:[n&&i&&Object(x.jsx)(N.a,{variant:"contained",type:"submit",children:"Log In"}),(!n||!i)&&Object(x.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Log In"}),Object(x.jsx)(oe.b,{to:"".concat(j,"/signup"),sx:{"text-decoration":"none"},children:Object(x.jsx)(N.a,{variant:"outlined",children:"Sign up"})})]})]})})}function ue(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(a.useState)(""),j=Object(o.a)(l,2),b=j[0],p=j[1],m=Object(q.c)((function(e){return e.rootURL})).url,O=Object(q.b)();return Object(x.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&b?i===b?O(ae.signup(n,i)):J.b.warn("Passwords don't match!"):J.b.warn("One field is missed!")},children:Object(x.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(x.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(x.jsx)(d.a,{sx:{my:2},children:"Sign up"}),Object(x.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",sx:{my:2},value:n,onChange:function(e){return r(e.target.value)}}),Object(x.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",sx:{my:2},value:i,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)(C.a,{className:"w-4/5",label:"Re-type Password",type:"password",sx:{my:2},value:b,onChange:function(e){return p(e.target.value)}}),Object(x.jsxs)(ce.a,{sx:{my:2,display:"flex",justifyContent:"space-evenly",width:"80%"},children:[n&&i&&Object(x.jsx)(N.a,{variant:"contained",type:"submit",children:"Create account"}),(!n||!i)&&Object(x.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Create account"})]}),Object(x.jsx)(oe.b,{className:"pb-4 text-blue-500",to:"".concat(m,"/login"),sx:{"text-decoration":"none"},children:"Already has an account?"})]})})}var le=n(16),je=n(19);function de(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(x.jsx)(le.b,{path:n,render:function(e){return t?Object(x.jsx)(le.a,{to:"/class"}):Object(x.jsx)(a,Object(je.a)({},e))}})}function be(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(x.jsx)(le.b,{path:n,render:function(e){return t?Object(x.jsx)(a,Object(je.a)({},e)):Object(x.jsx)(le.a,{to:"/login"})}})}var pe=n(110),xe=n.n(pe);function me(){var e=Object(q.c)((function(e){return e.rootURL})).url;return Object(x.jsx)("div",{className:"max-w-1/4 h-screen mx-auto flex flex-col justify-center",children:Object(x.jsxs)("div",{className:"my-auto flex flex-col justify-center p-8 border border-solid border-gray-300 rounded",children:[Object(x.jsx)("p",{className:"my-4 text-3xl font-bold",children:"Page not found"}),Object(x.jsx)("p",{className:"my-4",children:"Looks like you've followed a broken link or entered a URL that doesn't exist on this site."}),Object(x.jsxs)(oe.b,{to:"".concat(e,"/class"),className:"my-4 flex text-blue-500",children:[Object(x.jsx)(xe.a,{sx:{fontSize:"1rem",margin:"auto 0"}}),Object(x.jsx)("p",{className:"text-base text-blue-500",children:"Back to our site"})]}),Object(x.jsx)("div",{className:"my-4 w-full border border-solid border-gray-300"})]})})}n(159);function Oe(){var e=Object(q.c)((function(e){return e.session.isLoggedIn})),t=Object(le.g)().url,n=Object(q.b)();return n(ae.checkIfLoggedIn()),Object(a.useEffect)((function(){n({type:"create_root_url",payload:t})}),[]),Object(x.jsxs)("div",{children:[Object(x.jsxs)(le.d,{children:[Object(x.jsx)(be,{isLoggedIn:e,path:"".concat(t,"/class"),component:function(){return Object(x.jsx)(se,{})}}),Object(x.jsx)(de,{isLoggedIn:e,path:"".concat(t,"/signup"),component:ue}),Object(x.jsx)(de,{isLoggedIn:e,path:"".concat(t,"/login"),component:ie}),Object(x.jsx)(le.b,{path:"".concat(t,"/404"),component:me}),Object(x.jsx)(le.a,{from:"".concat(t,"/*"),to:"".concat(t,"/404")})]}),Object(x.jsx)(J.a,{position:"top-center",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function he(){return Object(x.jsx)(oe.a,{children:Object(x.jsx)(Oe,{})})}n(160);var fe=n(45),ge={url:null};var ve=JSON.parse(localStorage.getItem("user")),ye=ve?{isLoggedIn:!0,user:ve}:{isLoggedIn:!1,user:null};var we=Object(fe.combineReducers)({rootURL:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return"create_root_url"===n?Object(je.a)(Object(je.a)({},e),{},{url:p+a}):e},session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case X:case Y:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!1});case Z:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!0,user:a.user});case $:case ee:return Object(je.a)(Object(je.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}}}),Se=n(112),Ie=n(111),Ne=Object(Ie.composeWithDevTools)(Object(fe.applyMiddleware)(Se.a)),Ce=Object(fe.createStore)(we,Ne);s.a.render(Object(x.jsx)(q.a,{store:Ce,children:Object(x.jsx)(he,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.ecac88e3.chunk.js.map