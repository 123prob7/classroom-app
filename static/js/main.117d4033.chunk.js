(this["webpackJsonpclassroom-app"]=this["webpackJsonpclassroom-app"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(27),r=n.n(s),c=n(14),o=n(13),i=n(225),u=n(227),l=n(231),j=n(230),d=n(171),b=n(229),x=n(16),m=n(2);function p(e){var t=e.className,n=e.section,a=Object(x.g)().url;return Object(m.jsx)(u.a,{sx:{height:"16rem",width:"20rem"},children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(j.a,{component:"img",sx:{height:"9rem"},image:a+"/static/images/jerry.jpg",alt:"class banner"}),Object(m.jsxs)(l.a,{children:[Object(m.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"div",children:t}),Object(m.jsx)(d.a,{variant:"body2",color:"text.secondary",children:n})]})]})})}function O(e){var t=e.classes;return Object(m.jsx)(i.a,{className:"flex flex-wrap",container:!0,spacing:2,sx:{width:"100%",mx:"auto",my:1},children:t&&t.map((function(e){return Object(m.jsx)(i.a,{item:!0,xs:3,sx:{my:1},children:Object(m.jsx)(p,{className:e.className,section:e.section})},e._id)}))})}var h=n(236),g=n(217),f=n(237),v=n(238),y=n(108),w=n.n(y),S=n(109),I=n.n(S),N=n(235),C=n(220),k=n(232),L=n(234),T=n(233),P=n(215),E=n(29),U=n.n(E),z=n(44),J=n(35),G=n.n(J),R=n(22);function _(){var e=JSON.parse(sessionStorage.getItem("user")),t=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken||t&&t.accessToken?e&&e.accessToken||t&&t.accessToken:null}var D="https://react-classroom-api.herokuapp.com/api/class/";function F(){return(F=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(D,{token:_(),className:t,section:n}).then((function(e){return 200===e.data.status&&R.b.success(e.data.message),e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.openForm,n=e.handleDialogClose,s=e.handlePost,r=a.useState(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=a.useState(""),j=Object(o.a)(l,2),d=j[0],b=j[1],x=function(){n(),u(""),b("")},p=function(e){e.preventDefault(),i&&(n(),function(e,t){return F.apply(this,arguments)}(i,d).then((function(e){s(e.data.newItem)})).catch(),u(""),b(""))},O=t;return Object(m.jsx)(k.a,{open:O,onClose:x,children:Object(m.jsxs)("form",{action:"/",method:"POST",onSubmit:p,children:[Object(m.jsx)(P.a,{children:"Create class"}),Object(m.jsxs)(T.a,{children:[Object(m.jsx)(C.a,{autoFocus:!0,margin:"dense",id:"className",label:"Class name (required)",type:"text",fullWidth:!0,variant:"standard",name:"className",value:i,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(C.a,{margin:"dense",id:"section",label:"Section",type:"text",fullWidth:!0,variant:"standard",name:"section",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(m.jsxs)(L.a,{children:[Object(m.jsx)(N.a,{onClick:x,children:"Cancel"}),i&&Object(m.jsx)(N.a,{type:"submit",onClick:p,children:"Create"}),!i&&Object(m.jsx)(N.a,{disabled:!0,onClick:p,children:"Create"})]})]})})}var A=n(218),W=n(113),M=n(223),q=n(28),H="https://react-classroom-api.herokuapp.com/api/auth/",K={login:function(){var e=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(H+"login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logout:function(){var e=Object(z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.delete(H+"logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(z.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post(H+"signup",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSessionUser:function(){var e=Object(z.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("user"),e.abrupt("return",G.a.get(H,{token:_(),sessionUser:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q=K,V=n(114),X="REGISTER_SUCCESS",Y="REGISTER_FAIL",Z="LOGIN_SUCCESS",$="LOGIN_FAIL",ee="LOGOUT",te=new V.a,ne="myCat";var ae={login:function(e,t){return function(n){return Q.login(e,t).then((function(e){e&&200===e.data.status&&(n({type:Z,payload:{user:e.data}}),R.b.success(e.data.message),localStorage.setItem("user",JSON.stringify(e.data)),sessionStorage.setItem("user",JSON.stringify(e.data)),te.set(ne,e.data.accessToken,{path:"/"})),e&&202===e.data.status&&(n({type:$}),R.b.warn(e.data.message))})).catch((function(){n({type:$}),R.b.error("Something went wrong..")}))}},logout:function(){return function(e){Q.logout(),e({type:ee}),localStorage.removeItem("user"),sessionStorage.removeItem("user"),te.remove(ne)}},signup:function(e,t){return function(n){return Q.register(e,t).then((function(e){e&&200===e.data.status&&(n({type:X}),R.b.success(e.data.message)),e&&202===e.data.status&&(n({type:Y}),R.b.warn(e.data.message))})).catch((function(e){n({type:Y}),R.b.error("Something went wrong..")}))}},checkIfLoggedIn:function(){return function(e){var t=JSON.parse(sessionStorage.getItem("user"));t&&Q.getSessionUser().then((function(n){n.data&&n.data.user?n.data.user.userId===t.user.userId&&e({type:Z,payload:n.data}):(e({type:$}),localStorage.removeItem("user"),te.remove(ne))}))}}};function se(e){var t=e.handlePost,n=a.useState(!1),s=Object(o.a)(n,2),r=s[0],c=s[1],i=a.useState(null),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(q.c)((function(e){return e.session.user})),x=Object(q.b)(),p=function(){j(null)};return Object(m.jsx)(g.a,{sx:{flexGrow:1},children:Object(m.jsx)(h.a,{position:"static",children:Object(m.jsxs)(f.a,{children:[Object(m.jsx)(v.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(w.a,{})}),Object(m.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Classroom"}),b&&Object(m.jsxs)(g.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(m.jsx)(v.a,{onClick:function(){return c(!r)},size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(I.a,{})}),Object(m.jsx)(v.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(m.jsx)(A.a,{})}),Object(m.jsx)(W.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(l),onClose:p,children:Object(m.jsx)(M.a,{onClick:function(){p(),x(ae.logout())},children:"Log out"})})]}),Object(m.jsx)(B,{openForm:r,handleDialogClose:function(){return c(!r)},handlePost:t})]})})})}function re(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){function e(e){s(e)}var t;return t=e,G.a.get(D,{token:_()}).then((function(e){t(e.data.data)})),function(){return function(e){e(void 0)}(e)}}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(se,{handlePost:function(e){var t=e._id,a=e.className,r=e.section;return s([].concat(Object(c.a)(n),[{_id:t,className:a,section:r}]))}}),Object(m.jsx)(O,{classes:n})]})}var ce=n(219),oe=n(30);function ie(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(q.b)();return Object(m.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&l(ae.login(n,i))},children:Object(m.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(m.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(m.jsx)(d.a,{sx:{my:2},children:"Sign in"}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",value:n,onChange:function(e){return s(e.target.value)},sx:{my:2}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",value:i,onChange:function(e){return u(e.target.value)},sx:{my:2}}),Object(m.jsxs)(ce.a,{className:"flex justify-evenly w-4/5",sx:{my:2},children:[n&&i&&Object(m.jsx)(N.a,{variant:"contained",type:"submit",children:"Log In"}),(!n||!i)&&Object(m.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Log In"}),Object(m.jsx)(oe.b,{to:"/signup",sx:{"text-decoration":"none"},children:Object(m.jsx)(N.a,{variant:"outlined",children:"Sign up"})})]})]})})}function ue(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),i=c[0],u=c[1],l=Object(a.useState)(""),j=Object(o.a)(l,2),b=j[0],x=j[1],p=Object(q.b)();return Object(m.jsx)("form",{action:"/",method:"POST",onSubmit:function(e){e.preventDefault(),n&&i&&b?i===b?p(ae.signup(n,i)):R.b.warn("Passwords don't match!"):R.b.warn("One field is missed!")},children:Object(m.jsxs)(ce.a,{className:"flex flex-col items-center mx-auto my-2 w-1/4 min-h-3/4 border border-solid border-gray-200 rounded drop-shadow",children:[Object(m.jsx)(A.a,{className:"text-9xl rounded-full text-blue-500",fontSize:"",sx:{my:2}}),Object(m.jsx)(d.a,{sx:{my:2},children:"Sign up"}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Username",type:"text",sx:{my:2},value:n,onChange:function(e){return s(e.target.value)}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Password",type:"password",sx:{my:2},value:i,onChange:function(e){return u(e.target.value)}}),Object(m.jsx)(C.a,{className:"w-4/5",label:"Re-type Password",type:"password",sx:{my:2},value:b,onChange:function(e){return x(e.target.value)}}),Object(m.jsxs)(ce.a,{sx:{my:2,display:"flex",justifyContent:"space-evenly",width:"80%"},children:[n&&i&&Object(m.jsx)(N.a,{variant:"contained",type:"submit",children:"Create account"}),(!n||!i)&&Object(m.jsx)(N.a,{disabled:!0,variant:"contained",type:"submit",children:"Create account"})]}),Object(m.jsx)(oe.b,{className:"pb-4 text-blue-500",to:"/login",sx:{"text-decoration":"none"},children:"Already has an account?"})]})})}var le=n(23);function je(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(m.jsx)(x.b,{path:n,render:function(e){return t?Object(m.jsx)(x.a,{to:"/class"}):Object(m.jsx)(a,Object(le.a)({},e))}})}function de(e){var t=e.isLoggedIn,n=e.path,a=e.component;return Object(m.jsx)(x.b,{path:n,render:function(e){return t?Object(m.jsx)(a,Object(le.a)({},e)):Object(m.jsx)(x.a,{to:"/login"})}})}var be=n(110),xe=n.n(be);function me(){return Object(m.jsx)("div",{className:"max-w-1/4 h-screen mx-auto flex flex-col justify-center",children:Object(m.jsxs)("div",{className:"my-auto flex flex-col justify-center p-8 border border-solid border-gray-300 rounded",children:[Object(m.jsx)("p",{className:"my-4 text-3xl font-bold",children:"Page not found"}),Object(m.jsx)("p",{className:"my-4",children:"Looks like you've followed a broken link or entered a URL that doesn't exist on this site."}),Object(m.jsxs)(oe.b,{to:"/class",className:"my-4 flex text-blue-500",children:[Object(m.jsx)(xe.a,{sx:{fontSize:"1rem",margin:"auto 0"}}),Object(m.jsx)("p",{className:"text-base text-blue-500",children:"Back to our site"})]}),Object(m.jsx)("div",{className:"my-4 w-full border border-solid border-gray-300"})]})})}n(159);function pe(){var e=Object(q.c)((function(e){return e.session.isLoggedIn}));return Object(q.b)()(ae.checkIfLoggedIn()),Object(m.jsxs)("div",{children:[Object(m.jsxs)(x.d,{children:[Object(m.jsx)(de,{isLoggedIn:e,path:"/class",component:function(){return Object(m.jsx)(re,{})}}),Object(m.jsx)(je,{isLoggedIn:e,path:"/signup",component:ue}),Object(m.jsx)(je,{isLoggedIn:e,path:"/login",component:ie}),Object(m.jsx)(x.b,{path:"/404",component:me}),Object(m.jsx)(x.a,{exact:!0,path:"/",to:"/login"}),Object(m.jsx)(x.a,{from:"/*",to:"/404"})]}),Object(m.jsx)(R.a,{position:"top-center",autoClose:1500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}function Oe(){return Object(m.jsx)(oe.a,{basename:"/classroom-app",children:Object(m.jsx)(pe,{})})}n(160);var he=n(45),ge=JSON.parse(localStorage.getItem("user")),fe=ge?{isLoggedIn:!0,user:ge}:{isLoggedIn:!1,user:null};var ve=Object(he.combineReducers)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case X:case Y:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1});case Z:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!0,user:a.user});case $:case ee:return Object(le.a)(Object(le.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}}}),ye=n(112),we=n(111),Se=Object(we.composeWithDevTools)(Object(he.applyMiddleware)(ye.a)),Ie=Object(he.createStore)(ve,Se);r.a.render(Object(m.jsx)(q.a,{store:Ie,children:Object(m.jsx)(Oe,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.117d4033.chunk.js.map